<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>HEADER - The lcf_ui documentations</title>


        <!-- Custom HTML head -->
        <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/css/additional.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../lcf-accueil.html">ACCUEIL</a></li><li class="chapter-item "><a href="../lcf-club.html">CLUB</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../club/club-accueil.html">ACCUEIL</a></li><li class="chapter-item "><a href="../club/club-candidature.html">CANDIDATURE</a></li><li class="chapter-item "><a href="../club/club-dossier.html">DOSSIER</a></li></ol></li><li class="chapter-item "><a href="../lcf-dcn.html">DCN</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../dcn/dcn-accueil.html">ACCUEIL</a></li><li class="chapter-item "><a href="../dcn/dcn-parameters.html">PARAMETERS</a></li><li class="chapter-item "><a href="../dcn/dcn-dossier.html">DOSSIER</a></li></ol></li><li class="chapter-item expanded "><a href="../shared.html">SHARED</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../shared/dossier-template.html">DOSSIER-TEMPLATE</a></li><li class="chapter-item expanded "><a href="../shared/header.html" class="active">HEADER</a></li><li class="chapter-item "><a href="../shared/side-nav.html">SIDE-NAV</a></li><li class="chapter-item "><a href="../shared/page-not-found.html">PAGE-NOT-FOUND</a></li><li class="chapter-item "><a href="../shared/lcf-file.html">LCF-FILE</a></li><li class="chapter-item "><a href="../shared/lcf-terrain.html">LCF-TERRAIN</a></li><li class="chapter-item "><a href="../shared/lcf-radio.html">LCF-RADIO</a></li><li class="chapter-item "><a href="../shared/lcf-radio-three.html">LCF-RADIO-THREE</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The lcf_ui documentations</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="header"><a class="header" href="#header">HEADER</a></h1>
<p>The header of the app.</p>
<h2 id="description"><a class="header" href="#description">Description:</a></h2>
<p>This header always appears on top of the application. There is a season selection dropdown box on the right of the header.</p>
<h2 id="files"><a class="header" href="#files">Files:</a></h2>
<pre><code class="language-ignore">header.component.html
header.component.scss
header.component.ts
</code></pre>
<h2 id="functionalities"><a class="header" href="#functionalities">Functionalities:</a></h2>
<h3 id="general"><a class="header" href="#general">General:</a></h3>
<pre><code class="language-ts">ngOnInit(): void {
  this.currentUser = this.storageService.user;
  this.updateLogoClubUrl();
  this.subs.sink = this.subscribeDossiersFromSaNo(this.spawnSaNoObservable());
  this.subs.sink = this.subscribeParametersFromSaNo(this.spawnSaNoObservable());
}
</code></pre>
<p>Upon initialization, this header will spawn 2 observables that listen to value changes of <code>season</code>.
When a selected <code>season</code> changes, it invokes a call to backend and retrieves <code>dossiers</code> and <code>parameters</code> within the <code>season</code>.
Also, if connected <code>user</code> has a <code>cl_cod</code>, we'll update the club logo at the top right of the header.</p>
<h3 id="specific"><a class="header" href="#specific">Specific:</a></h3>
<h4 id="spawnsanoobservable"><a class="header" href="#spawnsanoobservable">spawnSaNoObservable</a></h4>
<pre><code class="language-ts">private spawnSaNoObservable() {
  return this.storageService.getSelectedSaisonSaNo$.pipe(
    tap((sa_no: number) =&gt; {
      this.selectedSaisonSaNo = sa_no;
    }),
    distinctUntilChanged()
  );
}
</code></pre>
<p>Spawn an observable that listen to value changes of <code>season</code>.
Upon receive a new one which is different from the old one (<code>distincUntilChanged()</code>), assign the new value to variable <code>this.selectedSaisonSaNo</code></p>
<h4 id="subscribedossiersfromsano"><a class="header" href="#subscribedossiersfromsano">subscribeDossiersFromSaNo</a></h4>
<pre><code class="language-ts">private subscribeDossiersFromSaNo(saNo$: Observable&lt;number&gt;) {
  return saNo$
    .pipe(
      switchMap((sa_no: number) =&gt; {
        // in case connected as 'club'
        if (
          this.storageService.connectId === 'club' &amp;&amp;
          this.currentUser.cl_cod
        ) {
          return this.dossierService.requestDossiers(
            sa_no,
            this.currentUser.cl_cod
          );
        }
        // case connected as 'dcn', do nothing
        else return of();
      })
    )
    .subscribe({
      next: (dossier: any) =&gt; {
        console.log('storage.dossiers: ', dossier);
        this.storageService.dossiers = dossier;
      },
      error: (err: any) =&gt; {
        console.error(err);
      },
    });
}
</code></pre>
<p>Subscribe to the <code>season</code> observable. Upon a <code>season</code> changes, invoke a call to backend, retrieve and set the new <code>dossiers</code> of that <code>season</code> to the <code>storage</code>.</p>
<h4 id="subscribeparametersfromsano"><a class="header" href="#subscribeparametersfromsano">subscribeParametersFromSaNo</a></h4>
<pre><code class="language-ts">private subscribeParametersFromSaNo(saNo$: Observable&lt;number&gt;) {
  return saNo$
    .pipe(
      switchMap((sa_no: number) =&gt; {
        return this.parametersService.requestParameters(sa_no);
      })
    )
    .subscribe({
      next: (params: any) =&gt; {
        console.log('storage.parameters: ', params.results);
        this.storageService.parameters = params.results;
      },
      error: (err: any) =&gt; {
        console.error(err);
      },
    });
}
</code></pre>
<p>Suscribe to the <code>season</code> observable. Upon a <code>season</code> changes, invoke a call to backend, retrieve and set the new <code>parameters</code> of that <code>season</code> to the <code>storage</code>.</p>
<h4 id="saisonchanged"><a class="header" href="#saisonchanged">saisonChanged</a></h4>
<pre><code class="language-ts">saisonChanged($event: any) {
  if ($event?.target?.value) {
    const sa_no = parseInt($event.target.value);
    this.storageService.selectedSaisonSaNo = sa_no;
    this.changeRouteToSelectedSaisonSaNo(sa_no);
  }
}
</code></pre>
<p>Upon selecting another <code>season</code> in dropdown box, correcting the <code>season</code> string in url by using <code>regex</code> pattern matching.</p>
<h4 id="changeroutetoselectedsaisonsano"><a class="header" href="#changeroutetoselectedsaisonsano">changeRouteToSelectedSaisonSaNo</a></h4>
<pre><code class="language-ts">private changeRouteToSelectedSaisonSaNo(sa_no: number): void {
  const newUrl = this.router.url.replace(/\d+/, String(sa_no));
  this.router.navigate([newUrl]);
}
</code></pre>
<p>Do <code>regex</code> pattern matching which finds the first number in the string, replace the <code>season</code> string then redirect to that new path.</p>
<h3 id="html"><a class="header" href="#html">HTML:</a></h3>
<pre><code class="language-html">&lt;header&gt;
  &lt;div class=&quot;partG logo cursor-pointer&quot; [routerLink]=&quot;['/']&quot;&gt;
    &lt;div&gt;
      &lt;div class=&quot;filet&quot;&gt;&lt;/div&gt;
      &lt;div class=&quot;projetclub&quot;&gt;
        &lt;div class=&quot;log&quot;&gt;&lt;/div&gt;
        &lt;div&gt;Projet &lt;span&gt;Club&lt;/span&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;div class=&quot;partD&quot; *ngIf=&quot;currentUser&quot;&gt;
    &lt;div class=&quot;saison&quot; *ngIf=&quot;storageService.showSaisonBox$ | async&quot;&gt;
      &lt;label&gt;Saison&lt;/label&gt;
      &lt;select (change)=&quot;saisonChanged($event)&quot; [(ngModel)]=&quot;selectedSaisonSaNo&quot;&gt;
        &lt;option
          *ngFor=&quot;let saison of currentUser.saisons&quot;
          [value]=&quot;saison?.sa_no&quot;
          [selected]=&quot;saison?.sa_no === selectedSaisonSaNo&quot;
        &gt;
          {{saison?.cs_lib}}
        &lt;/option&gt;
      &lt;/select&gt;
    &lt;/div&gt;
    &lt;div class=&quot;user&quot;&gt;
      &lt;img
        class=&quot;logo-club&quot;
        [src]=&quot;logoUrl&quot;
        (error)=&quot;logoClubErrorHandler($event)&quot;
        alt=&quot;Logo Club&quot;
      /&gt;
      &lt;div&gt;
        &lt;span class=&quot;name&quot;&gt;{{currentUser.nom}}&lt;/span&gt;
        &lt;span class=&quot;club&quot;
          &gt;{{currentUser.cl_cod}} - {{currentUser.club_nom}}&lt;/span
        &gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/header&gt;

&lt;!-- The header component always appears on top of every page
  (it won't be destroyed when navigating from page to page (page refresh does not count!)) so does the toast.
  Therefore, do not use this toast anywhere else,
  if does, a dubplication of toast will be created on top of each other! --&gt;
&lt;p-toast styleClass=&quot;custom-toast&quot; position=&quot;bottom-right&quot;&gt;&lt;/p-toast&gt;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../shared/dossier-template.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../shared/side-nav.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../shared/dossier-template.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../shared/side-nav.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
